# 用户认证说明
- 用户认证URL范围：除/api/user_register、/api/user_login外所有URL
- 必要参数：

| 参数名      | 参数说明 | 是否必须 | 类型  | 例子       | 备注                     |
|----------|------|------|-----|----------|------------------------|
| username | 当前已经登录的用户名  | 是    | 字符串 | "john"   | 长度不多于 100 个字符          |

注：每个接口的username参数可能有不同的含义，但都额外具有“当前已经登录的用户名”这一含义（/api/user_register、/api/user_login接口除外）。
- 返回信息：

| 状态码 | 信息                | 数据                                            | 备注 |
|-----|-------------------|-----------------------------------------------|----|
| 400 | 请求方式错误             | {"code": 400, "message": "请求方式错误"}        | 请求方式不为POST时触发  |
| 400 | 用户认证失败            | {"code": 400, "message": "请先登录"}            | 当前尚未登录任何用户或已登录的用户与请求操作的用户不符  |


注：如果用户认证失败，则返回上述信息；如果用户认证成功，则返回对应接口定义的返回信息。
# 接口说明
## 用户注册

- 请求方式：POST
- 请求URL：/api/user_register
- 请求参数：

| 参数名      | 参数说明 | 是否必须 | 类型  | 例子       | 备注                     |
|----------|------|------|-----|----------|------------------------|
| username | 用户名  | 是    | 字符串 | "john"   | 长度不多于 100 个字符          |
| password | 密码   | 是    | 字符串 | "123456" | 长度不多于 100 个字符          |
| usertype | 用户类型 | 是    | 字符串 | "0"      | "0" 表示管理员用户，"1" 表示普通用户 |

- 返回信息：

| 状态码 | 信息                | 数据                                            | 备注 |
|-----|-------------------|-----------------------------------------------|----|
| 200 | 注册成功              | {"code": 200, "message": "管理员/用户注册成功"}        | -  |
| 401 | 用户名已存在            | {"code": 401, "message": "用户名已存在"}            | -  |
| 402 | 用户名不能为空且长度不能超过100 | {"code": 402, "message": "用户名不能为空且长度不能超过100"} | -  |
| 403 | 密码不能为空且长度不能超过100  | {"code": 403, "message": "密码不能为空且长度不能超过100"}  | -  |

## 用户登录

- 请求方式：POST
- 请求URL：/api/user_login
- 请求参数：

| 参数名      | 参数说明 | 是否必须 | 类型  | 例子       | 备注                     |
|----------|------|------|-----|----------|------------------------|
| username | 用户名  | 是    | 字符串 | "john"   | 长度不多于 100 个字符          |
| password | 密码   | 是    | 字符串 | "123456" | 长度不多于 100 个字符          |
| usertype | 用户类型 | 是    | 字符串 | "0"      | "0" 表示管理员用户，"1" 表示普通用户 |

- 返回信息：

| 状态码 | 信息     | 数据                                 | 备注 |
|-----|--------|------------------------------------|----|
| 200 | 登录成功   | {"code": 200, "message": "登录成功"}   | -  |
| 401 | 用户名不存在 | {"code": 401, "message": "用户名不存在"} | -  |
| 402 | 密码错误   | {"code": 402, "message": "密码错误"}   | -  |

## 群组创建

- 请求方式：POST
- 请求URL：/api/group_create
- 请求参数：

| 参数名               | 参数说明 | 是否必须 | 类型  | 例子                 | 备注            |
|-------------------|------|------|-----|--------------------|---------------|
| username          | 用户名  | 是    | 字符串 | "john"             | 长度不多于 100 个字符 |
| group_name        | 群组名  | 是    | 字符串 | "group1"           | 长度不多于 100 个字符 |
| group_description | 群组描述 | 是    | 字符串 | "This is a group." | 长度不多于 200 个字符 |

- 返回信息：

| 状态码 | 信息            | 数据                                        | 备注 |
|-----|---------------|-------------------------------------------|----|
| 200 | 创建成功          | {"code": 200, "message": "群组创建成功"}        | -  |
| 401 | 用户不存在         | {"code": 401, "message": "用户不存在"}         | -  |
| 402 | 群组名长度不能超过100  | {"code": 402, "message": "群组名长度不能超过100"}  | -  |
| 403 | 群组名已存在        | {"code": 403, "message": "群组名已存在"}        | -  |
| 404 | 群组描述长度不能超过200 | {"code": 404, "message": "群组描述长度不能超过200"} | -  |


## 强制加入群组

- 请求方式：POST
- 请求URL：/api/group_join_forced
- 请求参数：

| 参数名               | 参数说明 | 是否必须 | 类型  | 例子                 | 备注            |
|-------------------|------|------|-----|--------------------|---------------|
| username          | 用户名  | 是    | 字符串 | "john"             | 长度不多于 100 个字符 |
| group_name        | 群组名  | 是    | 字符串 | "group1"           | 长度不多于 100 个字符 |

- 返回信息：

| 状态码 | 信息        | 数据                                    | 备注 |
|-----|-----------|---------------------------------------|----|
| 200 | 用户已加入群组   | {"code": 200, "message": "用户已加入群组"}   | -  |
| 401 | 用户不存在     | {"code": 401, "message": "用户不存在"}     | -  |
| 402 | 群组不存在     | {"code": 402, "message": "群组不存在"}     | -  |
| 403 | 用户已存在于群组中 | {"code": 403, "message": "用户已存在于群组中"} | -  |


## 群组申请加入

- 请求方式：POST
- 请求URL：/api/group_apply_to_join
- 请求参数：

| 参数名               | 参数说明 | 是否必须 | 类型  | 例子                 | 备注            |
|-------------------|------|------|-----|--------------------|---------------|
| username          | 用户名  | 是    | 字符串 | "john"             | 长度不多于 100 个字符 |
| group_name        | 群组名  | 是    | 字符串 | "group1"           | 长度不多于 100 个字符 |
| apply_reason      | 申请理由 | 是    | 字符串 | "I want to join."  | 长度不多于 200 个字符 |

- 返回信息：

| 状态码 | 信息            | 数据                                        | 备注 |
|-----|---------------|-------------------------------------------|----|
| 200 | 申请已提交         | {"code": 200, "message": "申请已提交"}         | -  |
| 401 | 用户不存在         | {"code": 401, "message": "用户不存在"}         | -  |
| 402 | 群组不存在         | {"code": 402, "message": "群组不存在"}         | -  |
| 403 | 用户正在申请加入该群组   | {"code": 403, "message": "用户正在申请加入该群组"}   | -  |
| 404 | 申请理由长度不能超过200 | {"code": 404, "message": "申请理由长度不能超过200"} | -  |

## 群组处理加入申请

- 请求方式：POST
- 请求URL：/api/group_handle_join_request
- 请求参数：

| 参数名          | 参数说明   | 是否必须 | 类型  | 例子              | 备注            |
|--------------|--------|------|-----|-----------------|---------------|
| username | 申请人用户名 | 是    | 字符串 | "john"          | 长度不多于 100 个字符 |
| group_name   | 群组名    | 是    | 字符串 | "group1"        | 长度不多于 100 个字符 |
| owner_name   | 群主用户名  | 是    | 字符串 | "owner"         | 长度不多于 100 个字符 |
| approval     | 审核意见   | 是    | 字符串 | "1"（同意）/"0"（拒绝） | -             |

- 返回信息：

| 状态码 | 信息          | 数据                                      | 备注 |
|-----|-------------|-----------------------------------------|----|
| 200 | 申请已处理       | {"code": 200, "message": "申请已处理"}       | -  |
| 401 | 用户不存在       | {"code": 401, "message": "用户不存在"}       | -  |
| 402 | 群组不存在       | {"code": 402, "message": "群组不存在"}       | -  |
| 403 | 群主不是该群组的创建者 | {"code": 403, "message": "群主不是该群组的创建者"} | -  |

## 群组删除成员

- 请求方式：POST
- 请求URL：/api/group_delete_member
- 请求参数：

| 参数名        | 参数说明    | 是否必须 | 类型  | 例子       | 备注            |
|------------|---------|------|-----|----------|---------------|
| to_deleter | 要删除的用户名 | 是    | 字符串 | "john"   | 长度不多于 100 个字符 |
| group_name | 群组名     | 是    | 字符串 | "group1" | 长度不多于 100 个字符 |
| username | 群主用户名   | 是    | 字符串 | "owner"  | 长度不多于 100 个字符 |

- 返回信息：

| 状态码 | 信息            | 数据                                        | 备注 |
|-----|---------------|-------------------------------------------|----|
| 200 | 用户已从群组中移除     | {"code": 200, "message": "用户已从群组中移除"}     | -  |
| 401 | 要删除的用户不存在     | {"code": 401, "message": "要删除的用户不存在"}     | -  |
| 402 | 群组不存在         | {"code": 402, "message": "群组不存在"}         | -  |
| 403 | 当前用户不是该群组的创建者 | {"code": 403, "message": "当前用户不是该群组的创建者"} | -  |
| 404 | 要删除的用户不在群组中   | {"code": 404, "message": "要删除的用户不在群组中"}   | -  |

## 群组退出

- 请求方式：POST
- 请求URL：/api/group_quit
- 请求参数：

| 参数名               | 参数说明 | 是否必须 | 类型  | 例子                 | 备注            |
|-------------------|------|------|-----|--------------------|---------------|
| username          | 用户名  | 是    | 字符串 | "john"             | 长度不多于 100 个字符 |
| group_name        | 群组名  | 是    | 字符串 | "group1"           | 长度不多于 100 个字符 |

- 返回信息：

| 状态码 | 信息      | 数据                                  | 备注 |
|-----|---------|-------------------------------------|----|
| 200 | 用户已退出群组 | {"code": 200, "message": "用户已退出群组"} | -  |
| 401 | 用户不存在   | {"code": 401, "message": "用户不存在"}   | -  |
| 402 | 群组不存在   | {"code": 402, "message": "群组不存在"}   | -  |
| 403 | 用户不在群组中 | {"code": 403, "message": "用户不在群组中"} | -  |


## 群组获取

- 请求方式：POST
- 请求URL：/api/group_get_groups
- 请求参数：

| 参数名               | 参数说明 | 是否必须 | 类型  | 例子                 | 备注            |
|-------------------|------|------|-----|--------------------|---------------|
| username          | 用户名  | 是    | 字符串 | "john"             | 长度不多于 100 个字符 |

- 返回信息：

| 状态码 | 信息    | 数据                                                | 备注 |
|-----|-------|---------------------------------------------------|----|
| 200 | 获取成功  | {"code": 200, "message": "获取成功", "groups": [...]} | -  |
| 401 | 用户不存在 | {"code": 401, "message": "用户不存在"}                 | -  |

- 接口描述：该接口用于用户获取所在的所有群组。

## 群组删除

- 请求方式：POST
- 请求URL：/api/group_delete_all
- 请求参数：

| 参数名        | 参数说明  | 是否必须 | 类型  | 例子       | 备注            |
|------------|-------|------|-----|----------|---------------|
| group_name | 群组名   | 是    | 字符串 | "group1" | 长度不多于 100 个字符 |
| username | 群主用户名 | 是    | 字符串 | "owner"  | 长度不多于 100 个字符 |

- 返回信息：

| 状态码 | 信息          | 数据                                      | 备注 |
|-----|-------------|-----------------------------------------|----|
| 200 | 群组已删除       | {"code": 200, "message": "群组已删除"}       | -  |
| 401 | 群组不存在       | {"code": 401, "message": "群组不存在"}       | -  |
| 402 | 群主不是该群组的创建者 | {"code": 402, "message": "群主不是该群组的创建者"} | -  |

- 接口描述：该接口用于群主删除群组。

## 群组搜索

- 请求方式：POST
- 请求URL：/api/group_search
- 请求参数：

| 参数名      | 参数说明 | 是否必须 | 类型  | 例子            | 备注         |
|----------|------|------|-----|---------------|------------|
| username          | 用户名  | 是    | 字符串 | "john"             | 长度不多于 100 个字符 |
| keywords | 关键词  | 是    | 字符串 | "python java" | 用空格分隔多个关键词 |

- 返回信息：

| 状态码 | 信息   | 数据                                                | 备注 |
|-----|------|---------------------------------------------------|----|
| 200 | 搜索成功 | {"code": 200, "message": "搜索成功", "groups": [...]} | -  |

- 接口描述：该接口用于搜索群组。当用户提交关键词后，接口会根据关键词搜索群组名称和描述，并返回搜索到的群组列表。

## 管理员注册用户

- 请求方式：POST
- 请求URL：/api/admin_register_user
- 请求参数：

| 参数名      | 参数说明 | 是否必须 | 类型  | 例子       | 备注            |
|----------|------|------|-----|----------|---------------|
| username          | 管理员用户名  | 是    | 字符串 | "john"             | 长度不多于 100 个字符 |
| name | 注册用户名  | 是    | 字符串 | "john"   | 长度不多于 100 个字符 |
| password | 密码   | 是    | 字符串 | "123456" | 长度不多于 100 个字符 |

- 返回信息：

| 状态码 | 信息                | 数据                                            | 备注 |
|-----|-------------------|-----------------------------------------------|----|
| 200 | 用户注册成功            | {"code": 200, "message": "用户注册成功"}            | -  |
| 401 | 用户名已存在            | {"code": 401, "message": "用户名已存在"}            | -  |
| 402 | 用户名不能为空且长度不能超过100 | {"code": 402, "message": "用户名不能为空且长度不能超过100"} | -  |
| 403 | 密码不能为空且长度不能超过100  | {"code": 403, "message": "密码不能为空且长度不能超过100"}  | -  |

## 管理员删除用户

- 请求方式：POST
- 请求URL：/api/admin_delete_user
- 请求参数：

| 参数名        | 参数说明    | 是否必须 | 类型  | 例子       | 备注            |
|------------|---------|------|-----|----------|---------------|
| username          | 管理员用户名  | 是    | 字符串 | "john"             | 长度不多于 100 个字符 |
| name   | 用户名     | 是    | 字符串 | "john"   | 长度不多于 100 个字符 |

- 返回信息：

| 状态码 | 信息     | 数据                                 | 备注 |
|-----|--------|------------------------------------|----|
| 200 | 用户删除成功 | {"code": 200, "message": "用户删除成功"} | -  |
| 401 | 用户不存在  | {"code": 401, "message": "用户不存在"}  | -  |

## 管理员删除用户组

- 请求方式：POST
- 请求URL：/api/admin_delete_group
- 请求参数：

| 参数名        | 参数说明  | 是否必须 | 类型  | 例子       | 备注            |
|------------|-------|------|-----|----------|---------------|
| username          | 管理员用户名  | 是    | 字符串 | "john"             | 长度不多于 100 个字符 |
| group_name | 用户组名称 | 是    | 字符串 | "group1" | 长度不多于 100 个字符 |

- 返回信息：

| 状态码 | 信息      | 数据                                  | 备注 |
|-----|---------|-------------------------------------|----|
| 200 | 用户组删除成功 | {"code": 200, "message": "用户组删除成功"} | -  |
| 401 | 用户组不存在  | {"code": 401, "message": "用户组不存在"}  | -  |


## 管理员添加用户到用户组

- 请求方式：POST
- 请求URL：/api/admin_add_user_to_group
- 请求参数：

| 参数名        | 参数说明  | 是否必须 | 类型  | 例子       | 备注            |
|------------|-------|------|-----|----------|---------------|
| username          | 管理员用户名  | 是    | 字符串 | "john"             | 长度不多于 100 个字符 |
| name   | 用户名   | 是    | 字符串 | "john"   | 长度不多于 100 个字符 |
| group_name | 用户组名称 | 是    | 字符串 | "group1" | 长度不多于 100 个字符 |

- 返回信息：

| 状态码 | 信息            | 数据                                        | 备注 |
|-----|---------------|-------------------------------------------|----|
| 200 | 用户加入用户组成功     | {"code": 200, "message": "用户加入用户组成功"}     | -  |
| 401 | 用户或用户组不存在     | {"code": 401, "message": "用户或用户组不存在"}     | -  |


## 管理员移除用户从用户组

- 请求方式：POST
- 请求URL：/api/admin_remove_user_from_group
- 请求参数：

| 参数名        | 参数说明    | 是否必须 | 类型  | 例子       | 备注            |
|------------|---------|------|-----|----------|---------------|
| username          | 管理员用户名  | 是    | 字符串 | "john"             | 长度不多于 100 个字符 |
| name   | 用户名     | 是    | 字符串 | "john"   | 长度不多于 100 个字符 |
| group_name   | 用户组名称    | 是    | 字符串 | "group1"   | 长度不多于 100 个字符 |

- 返回信息：

| 状态码 | 信息            | 数据                                        | 备注 |
|-----|---------------|-------------------------------------------|----|
| 200 | 用户退出用户组成功     | {"code": 200, "message": "用户退出用户组成功"}     | -  |
| 401 | 用户或用户组不存在     | {"code": 401, "message": "用户或用户组不存在"}     | -  |


## 管理员修改用户组信息

- 请求方式：POST
- 请求URL：/api/admin_edit_group_info
- 请求参数：

| 参数名             | 参数说明    | 是否必须 | 类型  | 例子                      | 备注            |
|-----------------|---------|------|-----|-------------------------|---------------|
| username          | 管理员用户名  | 是    | 字符串 | "john"             | 长度不多于 100 个字符 |
| group_name      | 用户组名称   | 是    | 字符串 | "group1"                | 长度不多于 100 个字符 |
| new_description | 新的用户组描述 | 是    | 字符串 | "new group description" | 长度不多于 255 个字符 |

- 返回信息：

| 状态码 | 信息        | 数据                                    | 备注 |
|-----|-----------|---------------------------------------|----|
| 200 | 用户组信息修改成功 | {"code": 200, "message": "用户组信息修改成功"} | -  |
| 401 | 用户组不存在    | {"code": 401, "message": "用户组不存在"}    | -  |

## 管理员获取用户列表

- 请求方式：POST
- 请求URL：/api/admin_get_user_list
- 请求参数：

| 参数名  | 参数说明 | 是否必须 | 类型 | 例子 | 备注         |
|------|------|------|----|----|------------|
| username          | 管理员用户名  | 是    | 字符串 | "john"             | 长度不多于 100 个字符 |
| page | 页码   | 是    | 整数 | 1  | 从1开始，表示第几页 |

- 返回信息：

| 状态码 | 信息            | 数据                                                                                                                                                                                             | 备注 |
|-----|---------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|----|
| 200 | 用户列表获取成功      | {"code": 200, "message": "用户列表获取成功", "data": [{"username": "user1", "password": "123456", "groups": ["group1", "group2"]}, {"username": "user2", "password": "123456", "groups": ["group1"]}]} | -  |
| 401 | 用户列表获取失败，页码越界 | {"code": 401, "message": "用户列表获取失败，页码越界"}                                                                                                                                                      | -  |



## 管理员获取用户组列表

- 请求方式：POST
- 请求URL：/api/admin_get_group_list
- 请求参数：

| 参数名  | 参数说明 | 是否必须 | 类型 | 例子 | 备注         |
|------|------|------|----|----|------------|
| username          | 管理员用户名  | 是    | 字符串 | "john"             | 长度不多于 100 个字符 |
| page | 页码   | 是    | 整数 | 1  | 从1开始，表示第几页 |

- 返回信息：

| 状态码 | 信息             | 数据                                                                                                                                                                                                                                                                                                                                                        | 备注 |
|-----|----------------|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|----|
| 200 | 用户组列表获取成功      | {"code": 200, "message": "用户组列表获取成功", "data": [{"name": "group1", "description": "group1 description", "creator": "creator1", "create_time": "2022-01-01 10:00:00", "members": ["user1", "user2"]}, {"name": "group2", "description": "group2 description", "creator": "creator2", "create_time": "2022-01-02 10:00:00", "members": ["user3", "user4"]}]} | -  |
| 401 | 用户组列表获取失败，页码越界 | {"code": 401, "message": "用户组列表获取失败，页码越界"}                                                                                                                                                                                                                                                                                                                | -  |
