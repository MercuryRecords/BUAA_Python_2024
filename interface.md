# 用户认证说明
- 用户认证URL范围：除/api/user_register、/api/user_login外所有URL
- 必要参数：

| 参数名      | 参数说明 | 是否必须 | 类型  | 例子       | 备注                     |
|----------|------|------|-----|----------|------------------------|
| username | 当前已经登录的用户名  | 是    | 字符串 | "john"   | 长度不多于 100 个字符          |

注：每个接口的username参数可能有不同的含义，但都额外具有“当前已经登录的用户名”这一含义（/api/user_register、/api/user_login接口除外）。
- 返回信息：

| 状态码 | 信息                | 数据                                            | 备注 |
|-----|-------------------|-----------------------------------------------|----|
| 400 | 请求方式错误             | {"code": 400, "message": "请求方式错误"}        | 请求方式不为POST时触发  |
| 400 | 用户认证失败            | {"code": 400, "message": "请先登录"}            | 当前尚未登录任何用户或已登录的用户与请求操作的用户不符  |


注：如果用户认证失败，则返回上述信息；如果用户认证成功，则返回对应接口定义的返回信息。

## 新增：退出登录
- 请求方式：POST
- 请求URL：/api/user_logout
- 请求参数：

| 参数名      | 参数说明 | 是否必须 | 类型  | 例子       | 备注                     |
|----------|------|------|-----|----------|------------------------|
| username | 用户名  | 是    | 字符串 | "john"   | 长度不多于 100 个字符          |

- 返回信息：

| 状态码 | 信息     | 数据                                 | 备注 |
|-----|--------|------------------------------------|----|
| 200 | 退出登录成功   | {"code": 200, "message": "退出登录成功"}   | -  |

说明：退出登录可清除cookie并删除为此用户创建的临时题单

# 接口说明
## 用户注册

- 请求方式：POST
- 请求URL：/api/user_register
- 请求参数：

| 参数名      | 参数说明 | 是否必须 | 类型  | 例子       | 备注                     |
|----------|------|------|-----|----------|------------------------|
| username | 用户名  | 是    | 字符串 | "john"   | 长度不多于 100 个字符          |
| password | 密码   | 是    | 字符串 | "123456" | 长度不多于 100 个字符          |
| usertype | 用户类型 | 是    | 字符串 | "0"      | "0" 表示管理员用户，"1" 表示普通用户 |

- 返回信息：

| 状态码 | 信息                | 数据                                            | 备注 |
|-----|-------------------|-----------------------------------------------|----|
| 200 | 注册成功              | {"code": 200, "message": "管理员/用户注册成功"}        | -  |
| 401 | 用户名已存在            | {"code": 401, "message": "用户名已存在"}            | -  |
| 402 | 用户名不能为空且长度不能超过100 | {"code": 402, "message": "用户名不能为空且长度不能超过100"} | -  |
| 403 | 密码不能为空且长度不能超过100  | {"code": 403, "message": "密码不能为空且长度不能超过100"}  | -  |

## 用户登录

- 请求方式：POST
- 请求URL：/api/user_login
- 请求参数：

| 参数名      | 参数说明 | 是否必须 | 类型  | 例子       | 备注                     |
|----------|------|------|-----|----------|------------------------|
| username | 用户名  | 是    | 字符串 | "john"   | 长度不多于 100 个字符          |
| password | 密码   | 是    | 字符串 | "123456" | 长度不多于 100 个字符          |
| usertype | 用户类型 | 是    | 字符串 | "0"      | "0" 表示管理员用户，"1" 表示普通用户 |

- 返回信息：

| 状态码 | 信息     | 数据                                 | 备注 |
|-----|--------|------------------------------------|----|
| 200 | 登录成功   | {"code": 200, "message": "登录成功"}   | -  |
| 401 | 用户名不存在 | {"code": 401, "message": "用户名不存在"} | -  |
| 402 | 密码错误   | {"code": 402, "message": "密码错误"}   | -  |

## 群组创建

- 请求方式：POST
- 请求URL：/api/group_create
- 请求参数：

| 参数名               | 参数说明 | 是否必须 | 类型  | 例子                 | 备注            |
|-------------------|------|------|-----|--------------------|---------------|
| username          | 用户名  | 是    | 字符串 | "john"             | 长度不多于 100 个字符 |
| group_name        | 群组名  | 是    | 字符串 | "group1"           | 长度不多于 100 个字符 |
| group_description | 群组描述 | 是    | 字符串 | "This is a group." | 长度不多于 200 个字符 |

- 返回信息：

| 状态码 | 信息            | 数据                                        | 备注 |
|-----|---------------|-------------------------------------------|----|
| 200 | 创建成功          | {"code": 200, "message": "群组创建成功"}        | -  |
| 401 | 用户不存在         | {"code": 401, "message": "用户不存在"}         | -  |
| 402 | 群组名长度不能超过100  | {"code": 402, "message": "群组名长度不能超过100"}  | -  |
| 403 | 群组名已存在        | {"code": 403, "message": "群组名已存在"}        | -  |
| 404 | 群组描述长度不能超过200 | {"code": 404, "message": "群组描述长度不能超过200"} | -  |


## 强制加入群组

- 请求方式：POST
- 请求URL：/api/group_join_forced
- 请求参数：

| 参数名               | 参数说明 | 是否必须 | 类型  | 例子                 | 备注            |
|-------------------|------|------|-----|--------------------|---------------|
| username          | 用户名  | 是    | 字符串 | "john"             | 长度不多于 100 个字符 |
| group_name        | 群组名  | 是    | 字符串 | "group1"           | 长度不多于 100 个字符 |

- 返回信息：

| 状态码 | 信息        | 数据                                    | 备注 |
|-----|-----------|---------------------------------------|----|
| 200 | 用户已加入群组   | {"code": 200, "message": "用户已加入群组"}   | -  |
| 401 | 用户不存在     | {"code": 401, "message": "用户不存在"}     | -  |
| 402 | 群组不存在     | {"code": 402, "message": "群组不存在"}     | -  |
| 403 | 用户已存在于群组中 | {"code": 403, "message": "用户已存在于群组中"} | -  |


## 群组申请加入

- 请求方式：POST
- 请求URL：/api/group_apply_to_join
- 请求参数：

| 参数名               | 参数说明 | 是否必须 | 类型  | 例子                 | 备注            |
|-------------------|------|------|-----|--------------------|---------------|
| username          | 用户名  | 是    | 字符串 | "john"             | 长度不多于 100 个字符 |
| group_name        | 群组名  | 是    | 字符串 | "group1"           | 长度不多于 100 个字符 |
| apply_reason      | 申请理由 | 是    | 字符串 | "I want to join."  | 长度不多于 200 个字符 |

- 返回信息：

| 状态码 | 信息            | 数据                                        | 备注 |
|-----|---------------|-------------------------------------------|----|
| 200 | 申请已提交         | {"code": 200, "message": "申请已提交"}         | -  |
| 401 | 用户不存在         | {"code": 401, "message": "用户不存在"}         | -  |
| 402 | 群组不存在         | {"code": 402, "message": "群组不存在"}         | -  |
| 403 | 用户正在申请加入该群组   | {"code": 403, "message": "用户正在申请加入该群组"}   | -  |
| 404 | 申请理由长度不能超过200 | {"code": 404, "message": "申请理由长度不能超过200"} | -  |

## 群组处理加入申请

- 请求方式：POST
- 请求URL：/api/group_handle_join_request
- 请求参数：

| 参数名          | 参数说明   | 是否必须 | 类型  | 例子              | 备注            |
|--------------|--------|------|-----|-----------------|---------------|
| username | 申请人用户名 | 是    | 字符串 | "john"          | 长度不多于 100 个字符 |
| group_name   | 群组名    | 是    | 字符串 | "group1"        | 长度不多于 100 个字符 |
| owner_name   | 群主用户名  | 是    | 字符串 | "owner"         | 长度不多于 100 个字符 |
| approval     | 审核意见   | 是    | 字符串 | "1"（同意）/"0"（拒绝） | -             |

- 返回信息：

| 状态码 | 信息          | 数据                                      | 备注 |
|-----|-------------|-----------------------------------------|----|
| 200 | 申请已处理       | {"code": 200, "message": "申请已处理"}       | -  |
| 401 | 用户不存在       | {"code": 401, "message": "用户不存在"}       | -  |
| 402 | 群组不存在       | {"code": 402, "message": "群组不存在"}       | -  |
| 403 | 群主不是该群组的创建者 | {"code": 403, "message": "群主不是该群组的创建者"} | -  |

## 群组删除成员

- 请求方式：POST
- 请求URL：/api/group_delete_member
- 请求参数：

| 参数名        | 参数说明    | 是否必须 | 类型  | 例子       | 备注            |
|------------|---------|------|-----|----------|---------------|
| to_deleter | 要删除的用户名 | 是    | 字符串 | "john"   | 长度不多于 100 个字符 |
| group_name | 群组名     | 是    | 字符串 | "group1" | 长度不多于 100 个字符 |
| username | 群主用户名   | 是    | 字符串 | "owner"  | 长度不多于 100 个字符 |

- 返回信息：

| 状态码 | 信息            | 数据                                        | 备注 |
|-----|---------------|-------------------------------------------|----|
| 200 | 用户已从群组中移除     | {"code": 200, "message": "用户已从群组中移除"}     | -  |
| 401 | 要删除的用户不存在     | {"code": 401, "message": "要删除的用户不存在"}     | -  |
| 402 | 群组不存在         | {"code": 402, "message": "群组不存在"}         | -  |
| 403 | 当前用户不是该群组的创建者 | {"code": 403, "message": "当前用户不是该群组的创建者"} | -  |
| 404 | 要删除的用户不在群组中   | {"code": 404, "message": "要删除的用户不在群组中"}   | -  |

## 群组退出

- 请求方式：POST
- 请求URL：/api/group_quit
- 请求参数：

| 参数名               | 参数说明 | 是否必须 | 类型  | 例子                 | 备注            |
|-------------------|------|------|-----|--------------------|---------------|
| username          | 用户名  | 是    | 字符串 | "john"             | 长度不多于 100 个字符 |
| group_name        | 群组名  | 是    | 字符串 | "group1"           | 长度不多于 100 个字符 |

- 返回信息：

| 状态码 | 信息      | 数据                                  | 备注 |
|-----|---------|-------------------------------------|----|
| 200 | 用户已退出群组 | {"code": 200, "message": "用户已退出群组"} | -  |
| 401 | 用户不存在   | {"code": 401, "message": "用户不存在"}   | -  |
| 402 | 群组不存在   | {"code": 402, "message": "群组不存在"}   | -  |
| 403 | 用户不在群组中 | {"code": 403, "message": "用户不在群组中"} | -  |


## 群组获取

- 请求方式：POST
- 请求URL：/api/group_get_groups
- 请求参数：

| 参数名               | 参数说明 | 是否必须 | 类型  | 例子                 | 备注            |
|-------------------|------|------|-----|--------------------|---------------|
| username          | 用户名  | 是    | 字符串 | "john"             | 长度不多于 100 个字符 |

- 返回信息：

| 状态码 | 信息    | 数据                                                | 备注 |
|-----|-------|---------------------------------------------------|----|
| 200 | 获取成功  | {"code": 200, "message": "获取成功", "groups": [...]} | -  |
| 401 | 用户不存在 | {"code": 401, "message": "用户不存在"}                 | -  |

- 接口描述：该接口用于用户获取所在的所有群组。

## 群组删除

- 请求方式：POST
- 请求URL：/api/group_delete_all
- 请求参数：

| 参数名        | 参数说明  | 是否必须 | 类型  | 例子       | 备注            |
|------------|-------|------|-----|----------|---------------|
| group_name | 群组名   | 是    | 字符串 | "group1" | 长度不多于 100 个字符 |
| username | 群主用户名 | 是    | 字符串 | "owner"  | 长度不多于 100 个字符 |

- 返回信息：

| 状态码 | 信息          | 数据                                      | 备注 |
|-----|-------------|-----------------------------------------|----|
| 200 | 群组已删除       | {"code": 200, "message": "群组已删除"}       | -  |
| 401 | 群组不存在       | {"code": 401, "message": "群组不存在"}       | -  |
| 402 | 群主不是该群组的创建者 | {"code": 402, "message": "群主不是该群组的创建者"} | -  |

- 接口描述：该接口用于群主删除群组。

## 群组搜索

- 请求方式：POST
- 请求URL：/api/group_search
- 请求参数：

| 参数名      | 参数说明 | 是否必须 | 类型  | 例子            | 备注         |
|----------|------|------|-----|---------------|------------|
| username          | 用户名  | 是    | 字符串 | "john"             | 长度不多于 100 个字符 |
| keywords | 关键词  | 是    | 字符串 | "python java" | 用空格分隔多个关键词 |

- 返回信息：

| 状态码 | 信息   | 数据                                                | 备注 |
|-----|------|---------------------------------------------------|----|
| 200 | 搜索成功 | {"code": 200, "message": "搜索成功", "groups": [...]} | -  |

- 接口描述：该接口用于搜索群组。当用户提交关键词后，接口会根据关键词搜索群组名称和描述，并返回搜索到的群组列表。

## 管理员注册用户

- 请求方式：POST
- 请求URL：/api/admin_register_user
- 请求参数：

| 参数名      | 参数说明 | 是否必须 | 类型  | 例子       | 备注            |
|----------|------|------|-----|----------|---------------|
| username          | 管理员用户名  | 是    | 字符串 | "john"             | 长度不多于 100 个字符 |
| name | 注册用户名  | 是    | 字符串 | "john"   | 长度不多于 100 个字符 |
| password | 密码   | 是    | 字符串 | "123456" | 长度不多于 100 个字符 |

- 返回信息：

| 状态码 | 信息                | 数据                                            | 备注 |
|-----|-------------------|-----------------------------------------------|----|
| 200 | 用户注册成功            | {"code": 200, "message": "用户注册成功"}            | -  |
| 401 | 用户名已存在            | {"code": 401, "message": "用户名已存在"}            | -  |
| 402 | 用户名不能为空且长度不能超过100 | {"code": 402, "message": "用户名不能为空且长度不能超过100"} | -  |
| 403 | 密码不能为空且长度不能超过100  | {"code": 403, "message": "密码不能为空且长度不能超过100"}  | -  |

## 管理员删除用户

- 请求方式：POST
- 请求URL：/api/admin_delete_user
- 请求参数：

| 参数名        | 参数说明    | 是否必须 | 类型  | 例子       | 备注            |
|------------|---------|------|-----|----------|---------------|
| username          | 管理员用户名  | 是    | 字符串 | "john"             | 长度不多于 100 个字符 |
| name   | 用户名     | 是    | 字符串 | "john"   | 长度不多于 100 个字符 |

- 返回信息：

| 状态码 | 信息     | 数据                                 | 备注 |
|-----|--------|------------------------------------|----|
| 200 | 用户删除成功 | {"code": 200, "message": "用户删除成功"} | -  |
| 401 | 用户不存在  | {"code": 401, "message": "用户不存在"}  | -  |

## 管理员删除用户组

- 请求方式：POST
- 请求URL：/api/admin_delete_group
- 请求参数：

| 参数名        | 参数说明  | 是否必须 | 类型  | 例子       | 备注            |
|------------|-------|------|-----|----------|---------------|
| username          | 管理员用户名  | 是    | 字符串 | "john"             | 长度不多于 100 个字符 |
| group_name | 用户组名称 | 是    | 字符串 | "group1" | 长度不多于 100 个字符 |

- 返回信息：

| 状态码 | 信息      | 数据                                  | 备注 |
|-----|---------|-------------------------------------|----|
| 200 | 用户组删除成功 | {"code": 200, "message": "用户组删除成功"} | -  |
| 401 | 用户组不存在  | {"code": 401, "message": "用户组不存在"}  | -  |


## 管理员添加用户到用户组

- 请求方式：POST
- 请求URL：/api/admin_add_user_to_group
- 请求参数：

| 参数名        | 参数说明  | 是否必须 | 类型  | 例子       | 备注            |
|------------|-------|------|-----|----------|---------------|
| username          | 管理员用户名  | 是    | 字符串 | "john"             | 长度不多于 100 个字符 |
| name   | 用户名   | 是    | 字符串 | "john"   | 长度不多于 100 个字符 |
| group_name | 用户组名称 | 是    | 字符串 | "group1" | 长度不多于 100 个字符 |

- 返回信息：

| 状态码 | 信息            | 数据                                        | 备注 |
|-----|---------------|-------------------------------------------|----|
| 200 | 用户加入用户组成功     | {"code": 200, "message": "用户加入用户组成功"}     | -  |
| 401 | 用户或用户组不存在     | {"code": 401, "message": "用户或用户组不存在"}     | -  |


## 管理员移除用户从用户组

- 请求方式：POST
- 请求URL：/api/admin_remove_user_from_group
- 请求参数：

| 参数名        | 参数说明   | 是否必须 | 类型  | 例子       | 备注            |
|------------|--------|------|-----|----------|---------------|
| username   | 管理员用户名 | 是    | 字符串 | "john"   | 长度不多于 100 个字符 |
| name       | 用户名    | 是    | 字符串 | "john"   | 长度不多于 100 个字符 |
| group_name | 用户组名称  | 是    | 字符串 | "group1" | 长度不多于 100 个字符 |

- 返回信息：

| 状态码 | 信息            | 数据                                        | 备注 |
|-----|---------------|-------------------------------------------|----|
| 200 | 用户退出用户组成功     | {"code": 200, "message": "用户退出用户组成功"}     | -  |
| 401 | 用户或用户组不存在     | {"code": 401, "message": "用户或用户组不存在"}     | -  |


## 管理员修改用户组信息

- 请求方式：POST
- 请求URL：/api/admin_edit_group_info
- 请求参数：

| 参数名             | 参数说明    | 是否必须 | 类型  | 例子                      | 备注            |
|-----------------|---------|------|-----|-------------------------|---------------|
| username        | 管理员用户名  | 是    | 字符串 | "john"                  | 长度不多于 100 个字符 |
| group_name      | 用户组名称   | 是    | 字符串 | "group1"                | 长度不多于 100 个字符 |
| new_description | 新的用户组描述 | 是    | 字符串 | "new group description" | 长度不多于 255 个字符 |

- 返回信息：

| 状态码 | 信息        | 数据                                    | 备注 |
|-----|-----------|---------------------------------------|----|
| 200 | 用户组信息修改成功 | {"code": 200, "message": "用户组信息修改成功"} | -  |
| 401 | 用户组不存在    | {"code": 401, "message": "用户组不存在"}    | -  |

## 管理员获取用户列表

- 请求方式：POST
- 请求URL：/api/admin_get_user_list
- 请求参数：

| 参数名      | 参数说明   | 是否必须 | 类型  | 例子     | 备注            |
|----------|--------|------|-----|--------|---------------|
| username | 管理员用户名 | 是    | 字符串 | "john" | 长度不多于 100 个字符 |
| page     | 页码     | 是    | 整数  | 1      | 从1开始，表示第几页    |

- 返回信息：

| 状态码 | 信息            | 数据                                                                                                                                                                                             | 备注 |
|-----|---------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|----|
| 200 | 用户列表获取成功      | {"code": 200, "message": "用户列表获取成功", "data": [{"username": "user1", "password": "123456", "groups": ["group1", "group2"]}, {"username": "user2", "password": "123456", "groups": ["group1"]}]} | -  |
| 401 | 用户列表获取失败，页码越界 | {"code": 401, "message": "用户列表获取失败，页码越界"}                                                                                                                                                      | -  |



## 管理员获取用户组列表

- 请求方式：POST
- 请求URL：/api/admin_get_group_list
- 请求参数：

| 参数名      | 参数说明   | 是否必须 | 类型  | 例子     | 备注            |
|----------|--------|------|-----|--------|---------------|
| username | 管理员用户名 | 是    | 字符串 | "john" | 长度不多于 100 个字符 |
| page     | 页码     | 是    | 整数  | 1      | 从1开始，表示第几页    |

- 返回信息：

| 状态码 | 信息             | 数据                                                                                                                                                                                                                                                                                                                                                        | 备注 |
|-----|----------------|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|----|
| 200 | 用户组列表获取成功      | {"code": 200, "message": "用户组列表获取成功", "data": [{"name": "group1", "description": "group1 description", "creator": "creator1", "create_time": "2022-01-01 10:00:00", "members": ["user1", "user2"]}, {"name": "group2", "description": "group2 description", "creator": "creator2", "create_time": "2022-01-02 10:00:00", "members": ["user3", "user4"]}]} | -  |
| 401 | 用户组列表获取失败，页码越界 | {"code": 401, "message": "用户组列表获取失败，页码越界"}                                                                                                                                                                                                                                                                                                                | -  |


## 管理员获取问题组

- 请求URL：/api/admin_get_problem_groups
- 请求参数：

| 参数名             | 参数说明             | 是否必须           | 类型   | 例子      | 备注                                                         |
| ------------------ | -------------------- | ------------------ | ------ | --------- | ------------------------------------------------------------ |
| username           | 管理员用户名         | 是                 | 字符串 | "john"    | 长度不多于 100 个字符                                        |
| username_to_search | 用户名               | 否                 | 字符串 | "JohnDoe" |                                                              |
| mode               | 模式                 | 如果输入用户名则是 | 整数   | 0         | 0用户可见的，1用户管理的                                     |
| to_search          | 搜索关键字           | 否                 | 字符串 | "Math"    | 搜索问题组标题和描述中的关键字                               |
| filter_group       | 用户组筛选器         | 否                 | 字符串 | "用户组1" | 为空表示不筛选，仅在mode为0,1时有效，为'_shared_to_all'表示筛选公开分享的问题 |
| page               | 页码                 | 否                 | 整数   | 1         | 从1开始                                                      |
| number_per_page    | 每页容纳的问题组数量 | 否                 | 整数   | 10        |                                                              |
- 成功信息：{"code": 200, "message": "问题组查询成功", "data": [字典1, 字典2, ...]}
- 字典格式：

| 参数名         | 参数说明      | 类型  | 例子                                          | 备注 |
|-------------|-----------|-----|---------------------------------------------|----|
| id          | 问题组id     | 整数  | 1                                           |    |
| title       | 问题组标题     | 字符串 | "Math Questions"                            |    |
| creator     | 问题组创建者    | 字符串 | "JohnDoe"                                   |    |
| description | 问题组描述     | 字符串 | "A new group for discussing math questions. |    |
| tags        | 问题组标签     | 列表  | ["矩阵", "行列式", ...]                          |    |
| problem_num | 问题组中的题目总数 | 整数  | 100                                         |    |
- 失败信息：{"code": 401, "message": "用户不存在"} / {"code": 409, "message": "题目列表为空"}


## 管理员问题组更新

- 请求方式：POST
- 请求URL：/api/admin_problem_group_update
- 请求参数：

| 参数名              | 参数说明   | 是否必须 | 类型  | 例子                                           | 备注                                 |
|------------------|--------|------|-----|----------------------------------------------|------------------------------------|
| username         | 管理员用户名 | 是    | 字符串 | "JohnDoe"                                    |                                    |
| problem_group_id | 问题组id  | 是    | 整数  |                                              |                                    |
| title            | 新问题组标题 | 否    | 字符串 | "New Math Questions"                         | 不包含此参数或为空则不修改，长度不超过50个字符           |
| description      | 新问题组描述 | 否    | 字符串 | "A new group for discussing math questions." | 不包含此参数则不修改，**为空则修改为空**，长度不超过200个字符 |

- 返回信息：

| 状态码 | 信息     | 数据                                 | 备注 |
|-----|--------|------------------------------------|----|
| 200 | 更新成功   | {"code": 200, "message": "更新成功"}   | -  |
| ... | ...    | ...                                | -  |


## 管理员问题组删除

- 请求方式：POST
- 请求URL：/api/admin_problem_group_delete
- 请求参数：

| 参数名              | 参数说明   | 是否必须 | 类型  | 例子        | 备注 |
|------------------|--------|------|-----|-----------|----|
| username         | 管理员用户名 | 是    | 字符串 | "JohnDoe" |    |
| problem_group_id | 问题组id  | 是    | 整数  |           |    |

- 返回信息：

| 状态码 | 信息     | 数据                                 | 备注 |
|-----|--------|------------------------------------|----|
| 200 | 删除成功   | {"code": 200, "message": "删除成功"}   | -  |
| ... | ...    | ...                                | -  |

这个接口用于删除指定问题组。需要提供问题组的创建者和标题来唯一标识问题组。删除成功后，返回删除成功的提示。


## 管理员获取问题
- 请求URL：/api/admin_get_problems
- 请求参数：

| 参数名                | 参数说明      | 是否必须 | 类型  | 例子        | 备注                                                                     |
|--------------------|-----------|:-----|-----|-----------|------------------------------------------------------------------------|
| username           | 管理员用户名    | 是    | 字符串 | "JohnDoe" |                                                                        |
| username_to_search | 要搜索的用户名   | 否    | 字符串 | "Alice"   |                                                                        |
| filter_group       | 用户组筛选器    | 否    | 字符串 | "用户组1"    | 为空表示不筛选，'_shared_to_all'表示筛选公开分享的问题，'_created_by_self'表示筛选用户创建的问题组中的问题 |
| to_search          | 搜索关键字     | 否    | 字符串 | "Math"    | 搜索问题组标题和描述中的关键字                                                        |
| page               | 页码        | 否    | 整数  | 1         | 从1开始                                                                   |
| number_per_page    | 每页容纳的问题组数 | 否    | 整数  | 10        |                                                                        |

- 成功信息：{"code": 200, "message": "问题查询成功", "data": [字典1, 字典2, ...]}
- 字典格式：

| 参数名                   | 参数说明   | 类型  | 例子               | 备注                       |
|-----------------------|--------|-----|------------------|--------------------------|
| id              | 问题id    | 整数 | 1        |                          |
| type | 问题类型 | 字符串 |  'c'或'b' |  |
| problem_title | 问题标题 | 字符串 |||
| content | 问题题干 | 字符串 |||
| ans_count | | 整数 |||
| field1 || 字符串 |||
| field2 || 字符串 |||
| field3 || 字符串 |||
| field4 || 字符串 |||
| field5 || 字符串 |||
| field6 || 字符串 |||
| field7 || 字符串 |||
| tags | 问题标签 | 列表 | ["矩阵", "行列式", ...]| ||
| creator | 上传者用户名 | 字符串 |||
| problem_group_id | 所属问题组id | 整数 | | |
| problem_group_title | 问题组标题 | 字符串 | "Math Questions"        |                         |
| all_right_count | 所有用户此题总正确次数 |整数|||
| all_count|所有用户做此题的总次数|整数|||

- 失败信息：{"code": 401, "message": "用户不存在"} / {"code": 409, "message": "题目列表为空"}

## 管理员题目更新

- 请求方式：POST
- 请求URL：/api/admin_problem_update
- 请求参数：

| 参数名        | 参数说明   | 是否必须 | 类型  | 例子        | 备注                                                                                                                      |
|------------|--------|------|-----|-----------|-------------------------------------------------------------------------------------------------------------------------|
| username   | 管理员用户名 | 是    | 字符串 | "JohnDoe" |                                                                                                                         |
| problem_id | 问题id   | 是    | 整数  |           |                                                                                                                         |
| ...        |        |      |     |           | 剩余字段title、type、content、ans_count、answer、field1-field7完全同用户端，非空则更新，为空则不更新；不包含tags则不更新tags，**包含tags且tags为空则删除此问题的所有tags** |

- 返回信息：

| 状态码 | 信息   | 数据                               | 备注 |
|-----|------|----------------------------------|:---|
| 200 | 更新成功 | {"code": 200, "message": "更新成功"} | -  |
| ... | ...  | ...                              | -  |

## 管理员题目删除

- 请求方式：POST
- 请求URL：/api/admin_problem_delete
- 请求参数：

| 参数名        | 参数说明   | 是否必须 | 类型  | 例子        | 备注 |
|------------|--------|------|-----|-----------|----|
| username   | 管理员用户名 | 是    | 字符串 | "JohnDoe" |    |
| problem_id | 问题id   | 是    | 整数  |           |    |


- 返回信息：

| 状态码 | 信息   | 数据                               | 备注 |
|-----|------|----------------------------------|----|
| 200 | 删除成功 | {"code": 200, "message": "删除成功"} | -  |
| ... | ...  | ...                              |    |

## 管理员（批量）添加敏感词

- 请求方式：POST
- 请求URL：/api/admin_add_sensitive_words_by_list
- 请求参数：

| 参数名        | 参数说明   | 是否必须 | 类型  | 例子        | 备注 |
|------------|--------|------|-----|-----------|----|
| username   | 管理员用户名 | 是    | 字符串 | "JohnDoe" |    |
| words[] | 要添加的敏感词（作为正则表达式进行匹配）   | 是    | 字符串或列表  |           | 若为字符串，则添加单个敏感词（此时参数名同样为words[]），为列表则批量添加敏感词   |


- 成功信息：{"code": 200, "message": "已添加...个敏感词", "data": 成功添加敏感词的数量（非0整数）}
- 失败信息：{"code": 422, "message": "敏感词已存在"}/{"code": 421, "message": "敏感词长度不能超过50"}/{"code": 421, "message": "未传入任何敏感词"}

注：若批量添加敏感词时，一部分敏感词添加成功，一部分敏感词因为已存在等原因添加失败，则返回成功信息，并返回成功添加的数量；只有所有敏感词都添加失败时，才会返回失败信息。


## 管理员从txt文件批量添加敏感词

- 请求方式：POST
- 请求URL：/api/admin_add_sensitive_words_by_txt_file
- 请求参数：

| 参数名        | 参数说明   | 是否必须 | 类型  | 例子        | 备注 |
|------------|--------|------|-----|-----------|----|
| username   | 管理员用户名 | 是    | 字符串 | "JohnDoe" |    |
| file | utf-8编码的文本文件   | 是    | 文件  |           | 上传方式与OCR接口上传PDF/图片的方式完全相同，即上传二进制即可，不用额外解码   |


- 成功信息：{"code": 200, "message": "已添加...个敏感词", "data": 成功添加敏感词的数量（非0整数）}
- 失败信息：{"code": 422, "message": "敏感词已存在"}/{"code": 421, "message": "敏感词长度不能超过50"}/{"code": 420, "message": "文件解码失败，请上传UTF-8编码的文本文件"}

注同上


## 管理员删除单个敏感词

- 请求方式：POST
- 请求URL：/api/admin_delete_sensitive_word
- 请求参数：

| 参数名        | 参数说明   | 是否必须 | 类型  | 例子        | 备注 |
|------------|--------|------|-----|-----------|----|
| username   | 管理员用户名 | 是    | 字符串 | "JohnDoe" |    |
| word | 要删除的敏感词   | 是    | 字符串  |           |    |


- 成功信息：{"code": 200, "message": "成功删除敏感词"}
- 失败信息：{"code": 422, "message": "敏感词不存在"}

## 管理员删除所有敏感词

- 请求方式：POST
- 请求URL：/api/admin_clear_sensitive_word
- 请求参数：

| 参数名        | 参数说明   | 是否必须 | 类型  | 例子        | 备注 |
|------------|--------|------|-----|-----------|----|
| username   | 管理员用户名 | 是    | 字符串 | "JohnDoe" |    |


- 成功信息：{"code": 200, "message": "已清除所有敏感词"}
- 失败信息：无

## 用户获取错题数量
- 请求方式：POST
- 请求URL：/api/get_records_num
- 请求参数：

| 参数名      | 参数说明 | 是否必须 | 类型  | 例子        | 备注 |
|----------|------|------|-----|-----------|----|
| username | 用户名  | 是    | 字符串 | "JohnDoe" |    |

- 返回信息：

| 状态码 | 信息   | 数据                                                 | 备注 |
|-----|------|----------------------------------------------------|----|
| 200 | 删除成功 | {"code": 200, "message": "错题数量获取成功", "data": 错题数目} | -  |
| ... | ...  | ...                                                |    |

## 用户获取错题列表
- 请求方式：POST
- 请求URL：/api/get_records
- 请求参数：

| 参数名             | 参数说明      | 是否必须 | 类型  | 例子        | 备注                                                                                             |
|-----------------|-----------|------|-----|-----------|------------------------------------------------------------------------------------------------|
| username        | 用户名       | 是    | 字符串 | "JohnDoe" |                                                                                                |
| page            | 页码        | 否    | 整数  | 1         | 从1开始                                                                                           |
| number_per_page | 每页容纳的问题组数 | 否    | 整数  | 10        |                                                                                                |
| method          | 错题排序方式    | 否    | 字符串 | "lru"     | "lru" 为取最新做错时间，越早做错排的越前；"error_rate"为错误率降序；"error_rate_rev"为错误率升序（错误率均不含0）；默认为取最新做错时间，越晚做错排的越前 |      |

- 成功信息：{"code": 200, "message": "错题获取成功", "data": [字典1, 字典2, ...]}
- 字典格式：

| 参数名                 | 参数说明        | 类型  | 例子                 | 备注 |
|---------------------|-------------|-----|--------------------|----|
| id                  | 问题id        | 整数  | 1                  |    |
| type                | 问题类型        | 字符串 | 'c'或'b'            |    |
| problem_title       | 问题标题        | 字符串 |                    |    |
| content             | 问题题干        | 字符串 |                    |    |
| ans_count           |             | 整数  |                    |    |
| field1              |             | 字符串 |                    |    |
| field2              |             | 字符串 |                    |    |
| field3              |             | 字符串 |                    |    |
| field4              |             | 字符串 |                    |    |
| field5              |             | 字符串 |                    |    |
| field6              |             | 字符串 |                    |    |
| field7              |             | 字符串 |                    |    |
| tags                | 问题标签        | 列表  | ["矩阵", "行列式", ...] |    ||
| creator             | 上传者用户名      | 字符串 |                    |    |
| problem_group_id    | 所属问题组id     | 整数  |                    |    |
| problem_group_title | 问题组标题       | 字符串 | "Math Questions"   |    |
| user_right_count    | 当前用户此题正确次数  | 整数  |                    |    |
| user_count          | 当前用户做此题的总次数 | 整数  |                    |    |
| all_right_count     | 所有用户此题总正确次数 | 整数  |                    |    |
| all_count           | 所有用户做此题的总次数 | 整数  |                    |    |
| last_error_time     | 最后做错时间      | 时间戳 | 1668489600         |    |
- 失败信息：{"code": 401, "message": "用户不存在"} / {"code": 409, "message": "题目列表为空"} / {"code": 410, "message": "页码越界"}

## 管理员获取问题组内所有问题
- 请求URL：/api/admin_get_problem_group_content
- 请求参数：

| 参数名              | 参数说明          | 是否必须 | 类型  | 例子        | 备注            |
|------------------|---------------|:-----|-----|-----------|---------------|
| problem_group_id | 问题组id或临时问题组id | 是    | 整数  |           |               |
| is_temporary     | 是否是临时问题组      | 否    | 字符串 |           | 'y'为是，'n'或空为否 |
| page             | 页码            | 否    | 整数  | 1         | 从1开始          |
| number_per_page  | 每页容纳的问题组数     | 否    | 整数  | 10        |               |

- 成功信息：{"code": 200, "message": "问题查询成功", "data": [字典1, 字典2, ...]}
- 字典格式：

| 参数名                   | 参数说明   | 类型  | 例子               | 备注                       |
|-----------------------|--------|-----|------------------|--------------------------|
| id              | 问题id    | 整数 | 1        |                          |
| type | 问题类型 | 字符串 |  'c'或'b' |  |
| problem_title | 问题标题 | 字符串 |||
| content | 问题题干 | 字符串 |||
| ans_count | | 整数 |||
| answer || 字符串 ||选择题答案|
| field1 || 字符串 |||
| field2 || 字符串 |||
| field3 || 字符串 |||
| field4 || 字符串 |||
| field5 || 字符串 |||
| field6 || 字符串 |||
| field7 || 字符串 |||
| tags | 问题标签 | 列表 | ["矩阵", "行列式", ...]| ||
| creator | 上传者用户名 | 字符串 |||
| problem_group_id | 所属问题组id | 整数 | | |
| problem_group_title | 问题组标题 | 字符串 | "Math Questions"        |                         |
| all_right_count | 所有用户此题总正确次数 |整数|||
| all_count|所有用户做此题的总次数|整数|||
- 失败信息：{"code": 401, "message": "用户不存在"} / {"code": 409, "message": "题目列表为空"}

## 用户头像修改

- 请求方式：POST
- 请求URL：/api/edit_avatar
- 请求参数：

| 参数名      | 参数说明 | 是否必须 | 类型  | 例子     | 备注             |
|----------|------|------|-----|--------|----------------|
| username | 用户名  | 是    | 字符串 | "john" | 长度不多于 100 个字符  |
| avatar   | 头像图片 | 是    | 文件  | -      | 头像图片文件，不超过 2MB |

- 返回信息：

| 状态码 | 信息     | 数据                                 | 备注 |
|-----|--------|------------------------------------|----|
| 200 | 头像修改成功 | {"code": 200, "message": "头像修改成功"} | -  |
| 401 | 用户名不存在 | {"code": 401, "message": "用户名不存在"} | -  |

## 获取用户头像

- 请求方式：POST
- 请求URL：/api/get_avatar
- 请求参数：

| 参数名      | 参数说明 | 是否必须 | 类型  | 例子       | 备注                     |
|----------|------|------|-----|----------|------------------------|
| username | 用户名  | 是    | 字符串 | "john"   | 长度不多于 100 个字符          |

- 返回信息：

| 状态码 | 信息     | 数据                                                      | 备注 |
|-----|--------|---------------------------------------------------------|----|
| 200 | 头像获取成功 | {"code": 200, "message": "头像获取成功", "avatar": "头像图片URL"} | -  |
| 401 | 用户名不存在 | {"code": 401, "message": "用户名不存在"}                      | -  |
