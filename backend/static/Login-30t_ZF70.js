import{d as L,r as w,a as _,b as n,o as f,c as N,e as p,f as e,w as o,u as m,g as V,h as g,A as P,E as k,i as y,j as R,l as T,v as U,k as j,p as A,m as E,_ as M}from"./index-BKtHripP.js";const $=u=>(A("data-v-a1f05be6"),u=u(),E(),u),z={class:"login-container"},D={class:"login-box"},G=$(()=>p("h1",{class:"logo"},"Liberal Shared Platform",-1)),H=L({__name:"Login",setup(u){const v=w(),d=w(!1),l=_({username:"",password:"",usertype:1}),s=_({name:"",pass:"",mode:1}),x=_({name:[{required:!0,message:"请输入用户名",trigger:"none"}],pass:[{required:!0,message:"请输入密码",trigger:"none"}]}),C=c=>{c&&c.validate(a=>{a?(l.username=s.name,l.password=s.pass,l.usertype=s.mode,console.log(l),P.post("/user_login",l,{headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then(function(t){console.log("successfully login!"),t.data.code===200?(k.success(t.data.message),s.mode==0?y.push({path:"/adminCenters",query:{username:l.username,mode:l.usertype}}):y.push({path:"/abilityShowed",query:{username:l.username,mode:l.usertype}})):(console.log(t.data.code),k.error("Login"+t.data.message))}).catch(function(){console.log("error!")})):console.log("error submit!")})},I=()=>{y.push("/register")},S=()=>{d.value=!d.value};return(c,a)=>{const t=n("el-icon"),b=n("el-input"),i=n("el-form-item"),q=n("el-button"),h=n("el-radio"),B=n("el-radio-group"),F=n("el-form");return f(),N("div",z,[p("div",D,[G,e(F,{ref_key:"ruleFormRef",ref:v,model:s,rules:x,class:"login-form"},{default:o(()=>[e(i,{prop:"name"},{default:o(()=>[e(b,{modelValue:s.name,"onUpdate:modelValue":a[0]||(a[0]=r=>s.name=r),placeholder:"用户名"},{prefix:o(()=>[e(t,null,{default:o(()=>[e(m(R))]),_:1})]),_:1},8,["modelValue"])]),_:1}),e(i,{prop:"pass"},{default:o(()=>[e(b,{modelValue:s.pass,"onUpdate:modelValue":a[1]||(a[1]=r=>s.pass=r),type:d.value?"text":"password",placeholder:"密码"},{prefix:o(()=>[e(t,null,{default:o(()=>[e(m(T))]),_:1})]),suffix:o(()=>[e(t,{class:"password-icon",onClick:S},{default:o(()=>[d.value?(f(),V(m(U),{key:0})):(f(),V(m(j),{key:1}))]),_:1})]),_:1},8,["modelValue","type"])]),_:1}),e(i,null,{default:o(()=>[e(q,{type:"primary",class:"login-button",onClick:a[2]||(a[2]=r=>C(v.value))},{default:o(()=>[g(" 登录 ")]),_:1})]),_:1}),e(i,{class:"login-options"},{default:o(()=>[e(B,{modelValue:s.mode,"onUpdate:modelValue":a[3]||(a[3]=r=>s.mode=r)},{default:o(()=>[e(h,{label:0},{default:o(()=>[g("管理员")]),_:1}),e(h,{label:1,style:{"margin-left":"70px"}},{default:o(()=>[g("用户")]),_:1})]),_:1},8,["modelValue"])]),_:1}),p("div",{class:"register-link"},[p("a",{onClick:I},"注册账号")])]),_:1},8,["model","rules"])])])}}}),K=M(H,[["__scopeId","data-v-a1f05be6"]]);export{K as default};
