import{d as I,r as L,a as f,b as r,o as N,c as R,e as i,f as o,w as t,h as g,A as B,E as v,i as V,p as S,m as T,_ as A}from"./index-BKtHripP.js";const O=u=>(S("data-v-3af239e5"),u=u(),T(),u),j={class:"register-container"},G={class:"register-box"},M=O(()=>i("h1",{class:"logo"},"LOGO",-1)),$=I({__name:"Register",setup(u){const c=L(),p=f({username:"",password:"",usertype:1}),k=(n,e,s)=>{if(e)s();else return s(new Error("请输入用户名"))},x=(n,e,s)=>{if(e==="")s(new Error("请输入密码"));else{if(a.checkPass!==""){if(!c.value)return;c.value.validateField("checkPass")}s()}},y=(n,e,s)=>{e===""?s(new Error("请再次输入密码")):e!==a.pass?s(new Error("密码不一致！")):s()},a=f({name:"",pass:"",checkPass:"",mode:1}),P=f({name:[{validator:k,trigger:"blur"}],pass:[{validator:x,trigger:"blur"}],checkPass:[{validator:y,trigger:"blur"}]}),b=n=>{n&&n.validate(e=>{e?(p.username=a.name,p.password=a.pass,p.usertype=a.mode,B.post("/user_register",p,{headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then(function(s){console.log("successfully registered"),s.data.code===200?(v.success(s.data.message),V.push("/")):(console.log(s.data.code),v.error(s.data.message))}).catch(function(){console.log("error!")})):console.log("error submit!")})},C=()=>{V.push("/")};return(n,e)=>{const s=r("User"),m=r("el-icon"),_=r("el-input"),d=r("el-form-item"),w=r("Lock"),h=r("el-radio"),E=r("el-radio-group"),U=r("el-button"),F=r("el-form");return N(),R("div",j,[i("div",G,[M,o(F,{ref_key:"ruleFormRef",ref:c,model:a,rules:P,class:"register-form"},{default:t(()=>[o(d,{prop:"name"},{default:t(()=>[o(_,{modelValue:a.name,"onUpdate:modelValue":e[0]||(e[0]=l=>a.name=l),placeholder:"用户名"},{prefix:t(()=>[o(m,null,{default:t(()=>[o(s)]),_:1})]),_:1},8,["modelValue"])]),_:1}),o(d,{prop:"pass"},{default:t(()=>[o(_,{modelValue:a.pass,"onUpdate:modelValue":e[1]||(e[1]=l=>a.pass=l),type:"password",placeholder:"密码","show-password":""},{prefix:t(()=>[o(m,null,{default:t(()=>[o(w)]),_:1})]),_:1},8,["modelValue"])]),_:1}),o(d,{prop:"checkPass"},{default:t(()=>[o(_,{modelValue:a.checkPass,"onUpdate:modelValue":e[2]||(e[2]=l=>a.checkPass=l),type:"password",placeholder:"确认密码","show-password":""},{prefix:t(()=>[o(m,null,{default:t(()=>[o(w)]),_:1})]),_:1},8,["modelValue"])]),_:1}),o(d,{class:"register-options"},{default:t(()=>[o(E,{modelValue:a.mode,"onUpdate:modelValue":e[3]||(e[3]=l=>a.mode=l)},{default:t(()=>[o(h,{label:0},{default:t(()=>[g("管理员")]),_:1}),o(h,{label:1,style:{"margin-left":"70px"}},{default:t(()=>[g("用户")]),_:1})]),_:1},8,["modelValue"])]),_:1}),o(d,null,{default:t(()=>[o(U,{type:"primary",class:"register-button",onClick:e[4]||(e[4]=l=>b(c.value))},{default:t(()=>[g(" 注册 ")]),_:1})]),_:1}),i("div",{class:"login-link"},[i("a",{onClick:C},"已有账号？立即登录")])]),_:1},8,["model","rules"])])])}}}),z=A($,[["__scopeId","data-v-3af239e5"]]);export{z as default};
